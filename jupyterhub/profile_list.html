<div class="row g-4 row-cols-1 row-cols-md-2 row-cols-xl-3 row-cols-xxl-4">
  {%- for profile in profile_list %}
  <div class="col">
    <div class="profile-list-card card h-100{% if profile.default %} selected{% endif %}">
      <div class="card-body">
        <h5 class="card-title">{{ profile.display_name }}</h5>
        <p class="card-text mb-0">{{ profile.description }}</p>
        <input 
          type="radio" 
          name="profile" 
          id="profile-item-{{ profile.slug }}" 
          value="{{ profile.slug }}"
          {% if profile.default %}checked{% endif %}
          class="hidden"
        >
      </div>
      {%- if profile.profile_options %}
        <div class="card-body">
          {%- for k, option in profile.profile_options.items() %}
            <label for="profile-option-{{ profile.slug }}--{{ k }}">{{ option.display_name }}</label>
            <select name="profile-option-{{ profile.slug }}--{{ k }}" class="form-select">
              {%- for k, choice in option['choices'].items() %}
                <option value="{{ k }}" {% if choice.default %}selected{% endif %}>{{ choice.display_name }}</option>
              {%- endfor %}
            </select>
            {%- endfor %}
        </div>
      {%- endif %}
    </div>
  </div>
  {%- endfor %}
</div>

<style>
  div.profile-list-card {
    cursor: pointer;
  }
  div.profile-list-card:hover {
    background-color: rgba(var(--bs-primary-rgb), 0.1);
  }

  div.profile-list-card.selected {
    outline: 3px solid rgba(var(--bs-primary-rgb));
    border-color: rgba(0, 0, 0, 0);
  }
</style>

<script>
  $("div.profile-list-card").click (function () {
    $(this).find ('input[type="radio"]').prop ("checked", true).trigger ("change")
  })
  
  $('input[type="radio"]').change (function () {
    $("div.profile-list-card").removeClass ("selected")
    
    $(this).parents ("div.profile-list-card").addClass ("selected")
  })
</script>
